<script>
// --- HORLOGE ---
function updateClock() {
  const now = new Date();
  const hh = String(now.getHours()).padStart(2, "0");
  const mm = String(now.getMinutes()).padStart(2, "0");
  document.getElementById("clock").textContent = `${hh}:${mm}`;
}
setInterval(updateClock, 1000);
updateClock();

// --- METEO ---
const API =
  "https://api.open-meteo.com/v1/forecast?latitude=50.63&longitude=3.06&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Europe/Paris";

const icons = {
  0:"‚òÄÔ∏è",1:"üå§Ô∏è",2:"‚õÖ",3:"‚òÅÔ∏è",
  45:"üå´Ô∏è",48:"üå´Ô∏è",
  51:"üåßÔ∏è",53:"üåßÔ∏è",55:"üåßÔ∏è",
  61:"üåßÔ∏è",63:"üåßÔ∏è",65:"üåßÔ∏è",
  71:"‚ùÑÔ∏è",73:"‚ùÑÔ∏è",75:"‚ùÑÔ∏è",
  95:"‚õàÔ∏è",96:"‚õàÔ∏è",99:"‚õàÔ∏è"
};

function loadWeather() {
  fetch(API)
    .then(r => r.json())
    .then(data => {
      const fc = document.getElementById("forecast");
      fc.innerHTML = "";

      for (let i = 0; i < 3; i++) {
        const date = new Date(data.daily.time[i]);
        const day = date.toLocaleDateString("fr-FR",{weekday:"short"});
        const code = data.daily.weathercode[i];
        const icon = icons[code] ?? "üå°Ô∏è";
        const tmax = Math.round(data.daily.temperature_2m_max[i]);
        const tmin = Math.round(data.daily.temperature_2m_min[i]);

        fc.innerHTML += `
          <div class="day">
            <h3>${day}</h3>
            <div class="icon">${icon}</div>
            <div class="temp">${tmax}¬∞ / ${tmin}¬∞</div>
          </div>`;
      }
    })
    .catch(() => {
      document.getElementById("forecast").innerHTML =
        "<div style='font-size:3vw;color:#f77;'>Erreur m√©t√©o</div>";
    });
}

// Mise √† jour m√©t√©o toutes les 10 minutes + au d√©marrage
loadWeather();
setInterval(loadWeather, 600000);
</script>
