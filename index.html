<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>M√©t√©o Lille</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background: #ffffff;
      font-family: Arial, sans-serif;
      color: #111;
      height: 100%;
      overflow: hidden;
    }
    .container {
      width: 100vw;
      height: 100vh;
      box-sizing: border-box;
      padding: 40px 60px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .title {
      font-size: 72px;
      font-weight: 600;
      text-align: center;
      letter-spacing: 0.15em;
      margin-bottom: 20px;
    }
    .subtitle {
      text-align: center;
      font-size: 24px;
      color: #666;
    }
    .grid {
      display: flex;
      justify-content: space-between;
      align-items: stretch;
      margin-top: 40px;
      flex: 1;
    }
    .day {
      flex: 1;
      margin: 0 20px;
      border-radius: 24px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.06);
      padding: 30px 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .day-label {
      font-size: 32px;
      margin-bottom: 10px;
    }
    .date-label {
      font-size: 20px;
      color: #777;
      margin-bottom: 10px;
    }
    .icon {
      font-size: 90px;
      margin: 10px 0 20px;
    }
    .temp-now {
      font-size: 80px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .temp-range {
      font-size: 32px;
      margin-bottom: 10px;
    }
    .desc {
      font-size: 24px;
      color: #555;
    }
    .footer {
      text-align: right;
      font-size: 18px;
      color: #aaa;
      margin-top: 10px;
    }
  </style>
</head>
<body>
<div class="container">
  <div>
    <div class="title">LILLE</div>
    <div class="subtitle" id="subtitle">M√©t√©o sur 3 jours</div>
  </div>
  <div class="grid">
    <div class="day" id="d0"></div>
    <div class="day" id="d1"></div>
    <div class="day" id="d2"></div>
  </div>
  <div class="footer" id="footer">Donn√©es : Open-Meteo</div>
</div>

<script>
const API_URL =
 "https://api.open-meteo.com/v1/forecast?latitude=50.63&longitude=3.06&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min,time&timezone=Europe/Paris&forecast_days=3&language=fr";

const icons = {
  0:"‚òÄÔ∏è",1:"üå§",2:"‚õÖ",3:"‚òÅÔ∏è",
  45:"üå´",48:"üå´",
  51:"üå¶",53:"üå¶",55:"üå¶",
  61:"üåß",63:"üåß",65:"üåß",
  80:"üåß",81:"üåß",82:"üåß",
  95:"‚õà",96:"‚õà",99:"‚õà"
};

const desc = {
  0:"Ciel d√©gag√©",
  1:"Peu nuageux",
  2:"Partiellement nuageux",
  3:"Couvert",
  45:"Brouillard",
  48:"Brouillard givrant",
  51:"Bruine l√©g√®re",
  53:"Bruine",
  55:"Bruine forte",
  61:"Pluie l√©g√®re",
  63:"Pluie mod√©r√©e",
  65:"Pluie forte",
  80:"Averses",
  81:"Averses marqu√©es",
  82:"Fortes averses",
  95:"Orages",
  96:"Orages avec gr√™le",
  99:"Fortes orages"
};

function formatDateLabel(str){
  const d = new Date(str);
  return d.toLocaleDateString("fr-FR",{weekday:"short",day:"2-digit",month:"short"});
}

function updateWeather(){
  fetch(API_URL)
    .then(r => r.json())
    .then(data => {
      const daysText = ["Aujourd'hui","Demain","Apr√®s-demain"];
      for(let i=0;i<3;i++){
        const code = data.daily.weathercode[i];
        const tmax = Math.round(data.daily.temperature_2m_max[i]);
        const tmin = Math.round(data.daily.temperature_2m_min[i]);
        const label = daysText[i];
        const dateLabel = formatDateLabel(data.daily.time[i]);
        let tempNowHtml = "";
        if(i===0){
          const tnow = Math.round(data.current_weather.temperature);
          tempNowHtml = `<div class="temp-now">${tnow}¬∞C</div>`;
        }
        const html = `
          <div>
            <div class="day-label">${label}</div>
            <div class="date-label">${dateLabel}</div>
            <div class="icon">${icons[code] || "‚ùì"}</div>
            ${tempNowHtml}
            <div class="temp-range">${tmin}¬∞C / ${tmax}¬∞C</div>
            <div class="desc">${desc[code] || ""}</div>
          </div>
        `;
        document.getElementById("d"+i).innerHTML = html;
      }
      const upd = new Date(data.current_weather.time);
      document.getElementById("footer").textContent =
        "Donn√©es : Open-Meteo ‚Äì Maj " +
        upd.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});
    })
    .catch(e=>{
      document.getElementById("subtitle").textContent =
        "Erreur de r√©cup√©ration des donn√©es m√©t√©o";
    });
}

updateWeather();
setInterval(updateWeather, 30*60*1000);
</script>
</body>
</html>
