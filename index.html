<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>MÃ©tÃ©o Lille â€¢ Navori</title>
<meta http-equiv="refresh" content="900"> <!-- Refresh auto 15 min -->
<style>
html, body {
  margin:0; padding:0;
  width:100vw; height:100vh;
  background:black;
  font-family:Arial, sans-serif;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:white;
}
#clock {font-size:6vw; font-weight:bold; margin-bottom:3vh;}
#forecast {display:flex; gap:3vw;}
.day {
  background:rgba(255,255,255,0.10);
  padding:2vw;
  border-radius:1vw;
  text-align:center;
  width:18vw;
}
.icon{font-size:5vw;}
.temp{margin-top:1vh;font-size:3vw;font-weight:bold;}
</style>
</head>

<body>
<div id="clock"></div>
<div id="forecast"></div>

<script>
function updateClock(){
  const d=new Date();
  document.getElementById("clock").textContent =
    d.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"});
}
setInterval(updateClock,1000); updateClock();

// URL Cloudflare Worker proxy
const API="https://meteo.jlefebvre59320.workers.dev/";

const ICON={
  0:"â˜€ï¸",1:"ğŸŒ¤ï¸",2:"â›…",3:"â˜ï¸",
  45:"ğŸŒ«ï¸",48:"ğŸŒ«ï¸",
  51:"ğŸŒ¦ï¸",53:"ğŸŒ§ï¸",55:"ğŸŒ§ï¸",
  61:"ğŸŒ§ï¸",63:"ğŸŒ§ï¸",65:"ğŸŒ§ï¸",
  71:"â„ï¸",73:"â„ï¸",75:"â„ï¸",
  95:"â›ˆï¸",96:"â›ˆï¸",99:"â›ˆï¸"
};

async function loadWeather(){
  try{
    const res=await fetch(API);
    const data=await res.json();
    const fc=document.getElementById("forecast");
    fc.innerHTML="";

    for(let i=0;i<3;i++){
      let j=new Date(data.daily.time[i])
        .toLocaleDateString("fr-FR",{weekday:"short"});
      let c=data.daily.weathercode[i];
      let mx=Math.round(data.daily.temperature_2m_max[i]);
      let mn=Math.round(data.daily.temperature_2m_min[i]);
      fc.innerHTML+=`
        <div class="day">
          <div>${j}</div>
          <div class="icon">${ICON[c]||"â”"}</div>
          <div class="temp">${mx}Â° / ${mn}Â°</div>
        </div>`;
    }
  }catch(e){
    document.getElementById("forecast").innerHTML="ğŸ”’ Erreur API";
  }
}
loadWeather();
setInterval(loadWeather,900000);
</script>
</body>
</html>
