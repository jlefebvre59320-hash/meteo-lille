<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>M√©t√©o Lille ‚Äì Affichage</title>
<meta http-equiv="refresh" content="1800"> <!-- Refresh auto 30min -->
<style>
html, body {
  margin: 0; padding: 0;
  width: 100vw; height: 100vh;
  background: #000;
  font-family: Arial, sans-serif;
  color: #fff;
  overflow: hidden;
}

/* Contenu centr√© plein √©cran */
.container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* Horloge */
#clock {
  font-size: 6vw;
  font-weight: bold;
  margin-bottom: 3vh;
  text-shadow: 0 0 25px rgba(255,255,255,0.4);
}

/* Bloc jours */
#forecast {
  width: 80%;
  display: flex;
  justify-content: space-around;
}

.day {
  background: rgba(255,255,255,0.1);
  width: 25%;
  border-radius: 18px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 0 20px rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.2);
}

.day h3 {
  margin: 0 0 10px;
  font-size: 2.2vw;
  text-transform: capitalize;
}

.icon {
  font-size: 4vw;
  margin-bottom: 10px;
}

.temp {
  font-size: 3vw;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="container">
  <div id="clock"></div>
  <div id="forecast"></div>
</div>

<script>
// --- HORLOGE ---
function updateClock() {
  const now = new Date();
  const hh = String(now.getHours()).padStart(2, "0");
  const mm = String(now.getMinutes()).padStart(2, "0");
  document.getElementById("clock").textContent = `${hh}:${mm}`;
}
setInterval(updateClock, 1000);
updateClock();

// --- METEO ---
const API =
  "https://api.open-meteo.com/v1/forecast?latitude=50.63&longitude=3.06&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Europe/Paris";

const icons = {
  0:"‚òÄÔ∏è",1:"üå§Ô∏è",2:"‚õÖ",3:"‚òÅÔ∏è",
  45:"üå´Ô∏è",48:"üå´Ô∏è",
  51:"üåßÔ∏è",53:"üåßÔ∏è",55:"üåßÔ∏è",
  61:"üåßÔ∏è",63:"üåßÔ∏è",65:"üåßÔ∏è",
  71:"‚ùÑÔ∏è",73:"‚ùÑÔ∏è",75:"‚ùÑÔ∏è",
  95:"‚õàÔ∏è",96:"‚õàÔ∏è",99:"‚õàÔ∏è"
};

function loadWeather() {
  fetch(API)
    .then(r => r.json())
    .then(data => {
      const fc = document.getElementById("forecast");
      fc.innerHTML = "";

      for (let i = 0; i < 3; i++) {
        const date = new Date(data.daily.time[i]);
        const day = date.toLocaleDateString("fr-FR",{weekday:"short"});
        const code = data.daily.weathercode[i];
        const icon = icons[code] ?? "üå°Ô∏è";
        const tmax = Math.round(data.daily.temperature_2m_max[i]);
        const tmin = Math.round(data.daily.temperature_2m_min[i]);

        fc.innerHTML += `
          <div class="day">
            <h3>${day}</h3>
            <div class="icon">${icon}</div>
            <div class="temp">${tmax}¬∞ / ${tmin}¬∞</div>
          </div>`;
      }
    })
    .catch(() => {
      document.getElementById("forecast").innerHTML =
        "<div style='font-size:3vw;color:#f77;'>Erreur m√©t√©o</div>";
    });
}

// Mise √† jour m√©t√©o toutes les 10 minutes + au d√©marrage
loadWeather();
setInterval(loadWeather, 600000);
</script>
</body>
</html>

