<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta http-equiv="refresh" content="1800"> <!-- Refresh toutes les 30 min -->
<title>MÃ©tÃ©o Lille</title>
<style>
html, body {
  margin: 0; padding: 0; overflow: hidden;
  background: #000;
  width: 100vw; height: 100vh;
  font-family: Arial, sans-serif;
  color: white;
}
#map {
  position: absolute; top: 0; left: 0;
  width: 75%; height: 100%;
}
#sidebar {
  position: absolute; right: 0; top: 0;
  width: 25%; height: 100%;
  background: rgba(0,0,0,0.55);
  display: flex; flex-direction: column;
  justify-content: space-between;
  padding: 10px;
}
.day {
  flex: 1;
  background: rgba(255,255,255,0.12);
  border-radius: 12px;
  margin: 10px 0;
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  text-align: center;
}
.day h3 { margin: 5px 0; font-size: 1.4em; }
.temp { font-size: 1.8em; font-weight: bold; }
.icon { font-size: 2.2em; margin: 5px 0; }
#clock {
  font-size: 1.8em; text-align: center; font-weight: bold;
  text-shadow: 2px 2px 6px black;
  margin-bottom: 5px;
}
</style>
</head>
<body>

<!-- Carte mÃ©tÃ©o Ventusky -->
<iframe id="map"
  src="https://embed.ventusky.com/?p=50.63;3.06;6&l=wind,precipitation,temperature-2m&w=soft"
  frameborder="0" scrolling="no">
</iframe>

<div id="sidebar">
  <div id="clock"></div>

  <div id="forecast"></div>
</div>

<script>
// ğŸ•‘ Horloge
function updateClock() {
  const now = new Date();
  document.getElementById("clock").innerText =
    now.toLocaleTimeString("fr-FR", { hour: "2-digit", minute: "2-digit" });
}
setInterval(updateClock, 1000);
updateClock();

// ğŸŒ¦ï¸ API mÃ©tÃ©o 3 jours - Open-Meteo (gratuit)
const url = "https://api.open-meteo.com/v1/forecast?latitude=50.63&longitude=3.06&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Europe%2FParis";
fetch(url)
  .then(r => r.json())
  .then(data => {
    const icons = {
      0: "â˜€ï¸", 1: "ğŸŒ¤ï¸", 2: "â›…", 3: "â˜ï¸",
      45: "ğŸŒ«ï¸", 48: "ğŸŒ«ï¸",
      51: "ğŸŒ¦ï¸", 61: "ğŸŒ§ï¸", 63: "ğŸŒ§ï¸", 65: "ğŸŒ§ï¸",
      71: "â„ï¸", 73: "â„ï¸", 75: "â„ï¸",
      95: "â›ˆï¸", 96: "â›ˆï¸", 99: "â›ˆï¸"
    };

    const forecastDiv = document.getElementById("forecast");
    forecastDiv.innerHTML = "";

    for (let i = 0; i < 3; i++) {
      const day = new Date(data.daily.time[i])
        .toLocaleDateString("fr-FR", { weekday: "short" });
      const code = data.daily.weathercode[i];
      const tempMax = Math.round(data.daily.temperature_2m_max[i]);
      const tempMin = Math.round(data.daily.temperature_2m_min[i]);
      const icon = icons[code] ?? "ğŸŒ¡ï¸";

      forecastDiv.innerHTML += `
        <div class="day">
          <h3>${day}</h3>
          <div class="icon">${icon}</div>
          <div class="temp">${tempMax}Â° / ${tempMin}Â°</div>
        </div>`;
    }
  });
</script>

</body>
</html>
