<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>MÃ©tÃ©o Lille â€“ Affichage</title>
<meta http-equiv="refresh" content="1800"> <!-- Refresh auto 30min -->
<style>
html, body {
  margin: 0; padding: 0;
  width: 100vw; height: 100vh;
  background: #000;
  font-family: Arial, sans-serif;
  color: #fff;
  overflow: hidden;
}

/* Contenu centrÃ© plein Ã©cran */
.container {
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

/* Horloge */
#clock {
  font-size: 6vw;
  font-weight: bold;
  margin-bottom: 3vh;
  text-shadow: 0 0 25px rgba(255,255,255,0.4);
}

/* Bloc jours */
#forecast {
  width: 80%;
  display: flex;
  justify-content: space-around;
}

.day {
  background: rgba(255,255,255,0.1);
  width: 25%;
  border-radius: 18px;
  padding: 20px;
  text-align: center;
  box-shadow: 0 0 20px rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.2);
}

.day h3 {
  margin: 0 0 10px;
  font-size: 2.2vw;
  text-transform: capitalize;
}

.icon {
  font-size: 4vw;
  margin-bottom: 10px;
}

.temp {
  font-size: 3vw;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="container">
  <div id="clock"></div>
  <div id="forecast"></div>
</div>

<script>
// Horloge en temps rÃ©el
function updateClock() {
  document.getElementById("clock").innerText =
    new Date().toLocaleTimeString("fr-FR", {hour:"2-digit", minute:"2-digit"});
}
setInterval(updateClock, 1000);
updateClock();

// API mÃ©tÃ©o
const api = "https://api.open-meteo.com/v1/forecast?latitude=50.63&longitude=3.06&daily=weathercode,temperature_2m_max,temperature_2m_min&timezone=Europe/Paris";

const icons = {
  0:"â˜€ï¸",1:"ðŸŒ¤ï¸",2:"â›…",3:"â˜ï¸",
  45:"ðŸŒ«ï¸",48:"ðŸŒ«ï¸",
  51:"ðŸŒ§ï¸",53:"ðŸŒ§ï¸",55:"ðŸŒ§ï¸",
  61:"ðŸŒ§ï¸",63:"ðŸŒ§ï¸",65:"ðŸŒ§ï¸",
  71:"â„ï¸",73:"â„ï¸",75:"â„ï¸",
  95:"â›ˆï¸",96:"â›ˆï¸",99:"â›ˆï¸"
};

fetch(api).then(r=>r.json()).then(data=>{
  const fc = document.getElementById("forecast");
  fc.innerHTML = "";
  
  for(let i=0;i<3;i++){
    let day = new Date(data.daily.time[i])
      .toLocaleDateString("fr-FR",{weekday:"short"});
    let code = data.daily.weathercode[i];
    let icon = icons[code] ?? "ðŸŒ¡ï¸";
    let tmax = Math.round(data.daily.temperature_2m_max[i]);
    let tmin = Math.round(data.daily.temperature_2m_min[i]);

    fc.innerHTML += `
      <div class="day">
        <h3>${day}</h3>
        <div class="icon">${icon}</div>
        <div class="temp">${tmax}Â° / ${tmin}Â°</div>
      </div>`;
  }
});
</script>
</body>
</html>
